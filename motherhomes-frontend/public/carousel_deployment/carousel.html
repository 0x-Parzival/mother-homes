<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Room Carousel</title>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #1a1a1a;
            font-family: sans-serif;
        }

        .carousel-container {
            display: flex;
            width: 100%;
            height: 100%;
            transition: transform 0.5s ease-in-out;
        }

        .room-wrapper {
            position: relative;
            min-width: 100%;
            height: 100%;
        }

        .room-frame {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        /* Navigation Arrows */
        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.0);
            /* Transparent default */
            border: none;
            color: rgba(255, 255, 255, 0.5);
            font-size: 4rem;
            padding: 20px;
            cursor: pointer;
            /* Change to none for "cursor movement"? No, "rooms move with cursor" implies 3D. */
            z-index: 200;
            transition: color 0.3s, background 0.3s;
            user-select: none;
            height: 100%;
            display: flex;
            align-items: center;
            outline: none;
        }

        .nav-btn:hover {
            color: rgba(255, 255, 255, 1);
            background: rgba(0, 0, 0, 0.1);
            /* Subtle highlight area */
        }

        .prev-btn {
            left: 0;
            justify-content: flex-start;
            width: 100px;
            /* Hit area */
        }

        .next-btn {
            right: 0;
            justify-content: flex-end;
            width: 100px;
            /* Hit area */
        }

        /* Hide label if desired, or keep it subtle */
        .room-label {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.3);
            text-transform: uppercase;
            font-weight: bold;
            z-index: 100;
            pointer-events: none;
            letter-spacing: 2px;
            display: none;
        }

        /* --- New Overlay Styles --- */
        .overlay-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            /* Let clicks pass through to 3D room where possible, or specific buttons can be auto */
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 40px;
            box-sizing: border-box;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
        }

        /* Specific Layouts */
        .room1-layout {
            justify-content: space-between;
        }

        .room2-layout {
            justify-content: center;
            align-items: center;
            /* Or specific grid */
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .room3-layout {
            display: flex;
            flex-direction: row;
            width: 100%;
            height: 100%;
            padding: 0;
            /* Split screen fills full */
            background: #000;
            /* Fallback */
        }

        /* Split Screen Room 3 */
        .split-left {
            width: 50%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .split-right {
            width: 50%;
            height: 100%;
            background: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 60px;
            box-sizing: border-box;
            color: #fff;
            pointer-events: auto;
            /* Allow text selection */
        }

        .split-left iframe {
            width: 100%;
            height: 100%;
            border: none;
            /* Optional: Scale effect if we can't zoom the 3D cam easily. CSS transform: */
            /* transform: scale(1.0); 
               transition: transform 8s ease; */
        }

        /* Text Elements */
        .headline {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            line-height: 1.1;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeSlideUp 0.8s ease forwards 0.5s;
        }

        .subtext {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 2rem;
            max-width: 600px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeSlideUp 0.8s ease forwards 0.7s;
        }

        .feature-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .feature-item {
            display: flex;
            align-items: center;
            font-size: 1.1rem;
            margin-bottom: 12px;
            opacity: 0;
            transform: translateX(-20px);
            animation: fadeSlideRight 0.5s ease forwards;
        }

        /* Staggered animation delays handled inline or via nth-child */
        .feature-item:nth-child(1) {
            animation-delay: 1.0s;
        }

        .feature-item:nth-child(2) {
            animation-delay: 1.2s;
        }

        .feature-item:nth-child(3) {
            animation-delay: 1.4s;
        }

        .feature-item:nth-child(4) {
            animation-delay: 1.6s;
        }

        .feature-item:nth-child(5) {
            animation-delay: 1.8s;
        }

        .feature-item:nth-child(6) {
            animation-delay: 2.0s;
        }

        .check-icon {
            color: #4ade80;
            /* Green */
            margin-right: 12px;
            font-weight: bold;
        }

        /* Specific modifications for Room 1 */
        .room1-top {
            position: absolute;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            width: 100%;
        }

        .room1-left {
            position: absolute;
            left: 50px;
            top: 40%;
            transform: translateY(-50%);
        }

        .room1-bottom {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            width: 100%;
        }

        /* Room 3 Gradient Overlay */
        .gradient-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
            pointer-events: none;
            display: flex;
            align-items: flex-end;
            padding: 30px;
            box-sizing: border-box;
        }

        /* Animations */
        @keyframes fadeSlideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeSlideRight {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    </style>
</head>

<body>

    <div class="carousel-container" id="carousel">
        <!-- Room 1 -->
        <div class="room-wrapper">
            <iframe class="room-frame" src="./ThreeJS-Room01/index.html"
                data-src="./ThreeJS-Room01/index.html"></iframe>
            <div class="overlay-container room1-layout">
                <div class="room1-top">
                    <div class="headline">Everything You Need. Nothing Extra to Buy.</div>
                </div>
                <div class="room1-left">
                    <ul class="feature-list">
                        <li class="feature-item"><span class="check-icon">✔</span> Premium Furnished Rooms</li>
                        <li class="feature-item"><span class="check-icon">✔</span> High-Speed WiFi</li>
                        <li class="feature-item"><span class="check-icon">✔</span> 24/7 CCTV Security</li>
                        <li class="feature-item"><span class="check-icon">✔</span> Daily Cleaning</li>
                        <li class="feature-item"><span class="check-icon">✔</span> Power Backup</li>
                        <li class="feature-item"><span class="check-icon">✔</span> Student & Professional Friendly</li>
                    </ul>
                </div>
                <div class="room1-bottom">
                    <div class="subtext">Fully furnished, secure, and hassle-free rooms for students & professionals.
                    </div>
                </div>
            </div>
        </div>

        <!-- Room 14 (Room 2 in flow) -->
        <div class="room-wrapper">
            <iframe class="room-frame" data-src="./ThreeJS-Room14/dist/index.html"></iframe>
            <div class="overlay-container room2-layout">
                <div style="padding-left: 50px;">
                    <br><br><br>
                    <div class="headline">Everything You Need.<br>Move In Today.</div>
                    <div class="subtext">Fully furnished, secure, and productivity-ready rooms for students &
                        professionals.</div>
                </div>
                <div style="padding-right: 50px;">
                    <ul class="feature-list">
                        <li class="feature-item" style="display:block; margin-bottom: 20px;">
                            <div style="font-weight:bold; color:#4ade80;">✔ Fully Furnished Study Setup</div>
                            <div style="font-size:0.9em; opacity:0.8; margin-left: 20px;">Ergonomic desk, storage
                                cabinets & lighting included.</div>
                        </li>
                        <li class="feature-item" style="display:block; margin-bottom: 20px;">
                            <div style="font-weight:bold; color:#4ade80;">✔ High-Speed WiFi</div>
                            <div style="font-size:0.9em; opacity:0.8; margin-left: 20px;">Seamless browsing, meetings &
                                streaming.</div>
                        </li>
                        <li class="feature-item" style="display:block; margin-bottom: 20px;">
                            <div style="font-weight:bold; color:#4ade80;">✔ 24/7 CCTV Security</div>
                            <div style="font-size:0.9em; opacity:0.8; margin-left: 20px;">Safe & monitored premises.
                            </div>
                        </li>
                        <li class="feature-item" style="display:block; margin-bottom: 20px;">
                            <div style="font-weight:bold; color:#4ade80;">✔ Daily Cleaning Service</div>
                            <div style="font-size:0.9em; opacity:0.8; margin-left: 20px;">Always fresh, zero maintenance
                                stress.</div>
                        </li>
                        <li class="feature-item" style="display:block; margin-bottom: 20px;">
                            <div style="font-weight:bold; color:#4ade80;">✔ Power Backup</div>
                            <div style="font-size:0.9em; opacity:0.8; margin-left: 20px;">Uninterrupted electricity.
                            </div>
                        </li>
                        <li class="feature-item" style="display:block;">
                            <div style="font-weight:bold; color:#4ade80;">✔ Nutritious Meals Available</div>
                            <div style="font-size:0.9em; opacity:0.8; margin-left: 20px;">Healthy food without cooking
                                hassle</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- Room 5 (Room 3 in flow) -->
        <div class="room-wrapper" style="background: #000;">
            <div class="room3-layout">
                <!-- Left: 3D Room -->
                <div class="split-left">
                    <iframe class="room-frame" data-src="./ThreeJS-Room05/index.html"></iframe>
                    <div class="gradient-overlay">
                        <div style="font-size: 1.5rem; font-weight: 600;">Peaceful, Fully Furnished Private Room</div>
                    </div>
                </div>
                <!-- Right: Text Content -->
                <div class="split-right">
                    <div class="headline">Comfort. Safety. Zero Hassle.</div>
                    <div class="subtext">Move into a fully furnished, secure and peaceful space designed for students &
                        working professionals.</div>

                    <ul class="feature-list" style="margin-top: 20px;">
                        <li class="feature-item" style="margin-bottom: 15px;">
                            <span class="check-icon">✔</span> <strong>Premium Furnished Bedroom</strong><br>
                            <span style="font-size:0.9em; opacity:0.7; margin-left: 26px;">Comfortable bed, storage &
                                aesthetic interiors included.</span>
                        </li>
                        <li class="feature-item" style="margin-bottom: 15px;">
                            <span class="check-icon">✔</span> <strong>24/7 CCTV Security</strong><br>
                            <span style="font-size:0.9em; opacity:0.7; margin-left: 26px;">Safe & monitored premises for
                                peace of mind.</span>
                        </li>
                        <li class="feature-item" style="margin-bottom: 15px;">
                            <span class="check-icon">✔</span> <strong>Daily Cleaning Service</strong><br>
                            <span style="font-size:0.9em; opacity:0.7; margin-left: 26px;">Fresh and hygienic
                                environment.</span>
                        </li>
                        <li class="feature-item" style="margin-bottom: 15px;">
                            <span class="check-icon">✔</span> <strong>Power Backup</strong><br>
                            <span style="font-size:0.9em; opacity:0.7; margin-left: 26px;">Uninterrupted electricity day
                                & night.</span>
                        </li>
                        <li class="feature-item" style="margin-bottom: 15px;">
                            <span class="check-icon">✔</span> <strong>High-Speed WiFi</strong><br>
                            <span style="font-size:0.9em; opacity:0.7; margin-left: 26px;">Stay connected without
                                interruptions.</span>
                        </li>
                        <li class="feature-item">
                            <span class="check-icon">✔</span> <strong>24/7 Purified Water</strong><br>
                            <span style="font-size:0.9em; opacity:0.7; margin-left: 26px;">Safe drinking water always
                                available.</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Arrow Controls -->
    <div class="nav-btn prev-btn" onclick="manualPrev()">&#8249;</div> <!-- Single guillemet like arrow -->
    <div class="nav-btn next-btn" onclick="manualNext()">&#8250;</div>

    <script>
        const carousel = document.getElementById('carousel');
        let currentIndex = 0;
        const totalRooms = 3;
        let autoPlayTimer;

        function updateCarousel() {
            const shift = 15; // Shift rooms to the left
            const offset = -currentIndex * 100 - shift;
            carousel.style.transform = `translateX(${offset}%)`;

            // Manage pause/resume state for rooms
            const frames = document.querySelectorAll('.room-frame');
            frames.forEach((frame, index) => {
                const contentWindow = frame.contentWindow;
                if (!contentWindow) return;

                if (index === currentIndex) {
                    contentWindow.postMessage({ type: 'resume' }, '*');
                } else {
                    contentWindow.postMessage({ type: 'pause' }, '*');
                }
            });
        }

        function nextRoom() {
            currentIndex = (currentIndex + 1) % totalRooms;
            updateCarousel();
        }

        function prevRoom() {
            currentIndex = (currentIndex - 1 + totalRooms) % totalRooms;
            updateCarousel();
        }

        function resetTimer() {
            clearInterval(autoPlayTimer);
            autoPlayTimer = setInterval(nextRoom, 10000);
        }

        function manualNext() {
            nextRoom();
            resetTimer();
        }

        function manualPrev() {
            prevRoom();
            resetTimer();
        }

        // Start Auto-play
        resetTimer();

        // Keyboard Navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') {
                manualNext();
            } else if (e.key === 'ArrowLeft') {
                manualPrev();
            }
        });

        // Iframe background injection and initial setup
        window.addEventListener('load', () => {
            const frames = document.querySelectorAll('.room-frame');

            // Staggered loading: Load current room immediately
            const currentFrame = frames[currentIndex];
            const currentSrc = currentFrame.getAttribute('data-src');
            if (!currentFrame.src || currentFrame.src === window.location.href) {
                currentFrame.src = currentSrc;
            }

            // Load other rooms after a delay to prioritize initial render
            setTimeout(() => {
                frames.forEach((frame, index) => {
                    if (index !== currentIndex) {
                        const src = frame.getAttribute('data-src');
                        if (!frame.src || frame.src === window.location.href) {
                            frame.src = src;
                        }
                    }
                });
            }, 2500); // 2.5s delay for background rooms

            frames.forEach((frame, index) => {
                frame.addEventListener('load', () => {
                    try {
                        const doc = frame.contentWindow.document;

                        // Pass key events to parent
                        doc.addEventListener('keydown', (e) => {
                            if (e.key === 'ArrowRight') {
                                manualNext();
                            } else if (e.key === 'ArrowLeft') {
                                manualPrev();
                            }
                        });

                        // Hide scrollbars
                        doc.body.style.overflow = 'hidden';

                        // Initial state: pause properly if not the first room
                        if (index !== currentIndex) {
                            frame.contentWindow.postMessage({ type: 'pause' }, '*');
                        }

                    } catch (e) {
                        // Ignore cross-origin issues, but postMessage will still work
                    }
                });
            });
        });

    </script>
</body>

</html>